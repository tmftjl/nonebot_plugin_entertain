<!DOCTYPE html>

<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Membership 管理控制台</title>
  <link rel="stylesheet" href="/membership/static/console.css">
  <meta name="theme-color" content="#667eea">
  <meta name="description" content="Membership 管理控制台 - 现代化的后台界面">
</head>
<body>
  <!-- Toast閫氱煡瀹瑰櫒 -->
  <div id="toast-container"></div>
  
  <!-- 鍔犺浇閬僵 -->
  <div id="loading-overlay" class="hidden">
    <div class="spinner"></div>
    <div class="loading-text">加载中..</div>
  </div>

  <!-- 簲鐢ㄥ鍣?-->
  <div id="app" class="hidden">
    <!-- 椤堕儴瀵艰埅鏍?-->
    <header class="top-bar">
      <div class="top-bar-left">
        <h1 class="logo">
          <span class="logo-icon">馃尭</span>
          <span class="logo-text">Membership 控制台</span>
      </div>
      <div class="top-bar-right">
        <button id="theme-toggle" class="icon-btn" title="切换主题" aria-label="切换主题">
          <span class="icon">馃寵</span>
        </button>
        <button id="refresh-btn" class="icon-btn" title="刷新数据" aria-label="刷新数据">
          <span class="icon">馃攧</span>
        </button>
      </div>
    </header>

    <div class="main-container">
      <!-- 侧边忓鑸?-->
      <aside class="sidebar">
        <nav class="nav-menu" role="navigation" aria-label="鑸?>
          <a href="#dashboard" class="nav-item active" data-tab="dashboard" role="button">
            <span class="nav-icon">馃搳</span>
            <span class="nav-text">仪表盘?/span>
          </a>
          <a href="#renewal" class="nav-item" data-tab="renewal" role="button">
            <span class="nav-icon">馃挵</span>
            <span class="nav-text">浼氬憳缁垂</span>
          </a>
          <a href="#stats" class="nav-item" data-tab="stats" role="button">
            <span class="nav-icon">馃搱</span>
            <span class="nav-text">娑堟伅缁熻</span>
          </a>
          <a href="#permissions" class="nav-item" data-tab="permissions" role="button">
            <span class="nav-icon">馃攼</span>
            <span class="nav-text">权限管理</span>
          </a>
          <a href="#config" class="nav-item" data-tab="config" role="button">
            <span class="nav-icon">鈿欙笍</span>
            <span class="nav-text">配置管理</span>
          </a>
        </nav>
      </aside>

      <!-- 唴瀹瑰尯 -->
      <main class="content-area" role="main">
        <!-- 仪表盘?-->
        <section id="tab-dashboard" class="tab-content active">
          <h2 class="page-title">馃搳 仪表盘樻€昏</h2>
          <div class="stats-cards">
            <div class="stat-card" role="status" aria-label="娲昏穬缇ょ粍缁熻">
              <div class="stat-icon">馃懃</div>
              <div class="stat-info">
                <div class="stat-label">娲昏穬缇ょ粍</div>
                <div id="stat-active-groups" class="stat-value">-</div>
              </div>
            </div>
            <div class="stat-card" role="status" aria-label="有效会员缁熻">
              <div class="stat-icon">馃拵</div>
              <div class="stat-info">
                <div class="stat-label">有效会员</div>
                <div id="stat-valid-members" class="stat-value success">-</div>
              </div>
            </div>
            <div class="stat-card" role="status" aria-label="即将到期缁熻">
              <div class="stat-icon">鈿狅笍</div>
              <div class="stat-info">
                <div class="stat-label">即将到期</div>
                <div id="stat-expiring-soon" class="stat-value warning">-</div>
              </div>
            </div>
            <div class="stat-card" role="status" aria-label="已到期熺粺璁?>
              <div class="stat-icon">鈴?/div>
              <div class="stat-info">
                <div class="stat-label">已到期?/div>
                <div id="stat-expired" class="stat-value danger">-</div>
              </div>
            </div>
          </div>
        </section>

        <!-- 浼氬憳缁垂 -->
        <section id="tab-renewal" class="tab-content">
          <h2 class="page-title">馃挵 浼氬憳缁垂绠＄悊</h2>
          
          <!-- 群组列表闈㈡澘 -->
          <div class="panel">
            <div class="panel-header">
              <h3 class="panel-title">馃搵 群组列表</h3>
              <div class="toolbar">
                <input id="group-search" class="input" placeholder="馃攳 搜索群号..." aria-label="搜索群号">
                <select id="status-filter" class="input" aria-label="筛选状态>
                  <option value="all">馃搨 全部状态?/option>
                  <option value="active">鉁?鏈夋晥</option>
                  <option value="soon">鈴?即将到期</option>
                  <option value="today">馃敂 浠婃棩鍒版湡</option>
                  <option value="expired">鉂?已到期?/option>
                </select>
              </div>
            </div>
            <div class="table-container">
              <table class="data-table">
                <thead>
                  <tr>
                    <th><input type="checkbox" id="select-all" aria-label="鍏ㄩ€?></th>
                    <th data-sort="group">缇ゅ彿 鈻?/th>
                    <th data-sort="status">鐘舵€?鈻?/th>
                    <th data-sort="expiry">鍒版湡鏃堕棿 鈻?/th>
                    <th data-sort="days">鍓╀綑澶╂暟 鈻?/th>
                    <th>鎿嶄綔</th>
                  </tr>
                </thead>
                <tbody id="groups-table-body">
                  <tr><td colspan="6" class="text-center">鈴?加载中..</td></tr>
                </tbody>
              </table>
            </div>
          </div>
          
          <!-- 缁垂鐮佺鐞嗛潰鏉匡紙鍚堝苟锛?-->
          <div class="panel">
            <div class="panel-header">
              <h3 class="panel-title">馃帿 缁垂鐮佺鐞?/h3>
            </div>
            <div class="panel-body">
              <!-- 鐢熸垚缁垂鐮佸尯鍩?-->
              <div class="renewal-generate-section">
                <h4 style="margin-bottom: 12px; color: var(--text-secondary); font-size: 14px;">鉁?鐢熸垚鏂扮画璐圭爜</h4>
                <div class="toolbar">
                  <label>
                    <span style="font-weight: 600; margin-right: 8px;">鈴憋笍 鏃堕暱</span>
                    <input id="renewal-length" type="number" min="1" value="30" class="form-input-sm" style="width:100px;" aria-label="缁垂鏃堕暱">
                  </label>
                  <label>
                    <span style="font-weight: 600; margin-right: 8px;">馃搮 鍗曚綅</span>
                    <select id="renewal-unit" class="form-select-sm" aria-label="鏃堕棿鍗曚綅">
                      <option value="澶?>澶?/option>
                      <option value="鏈?>鏈?/option>
                      <option value="骞?>骞?/option>
                    </select>
                  </label>
                  <button id="generate-code-btn" class="btn btn-primary btn-sm">鉁?鐢熸垚缁垂鐮?/button>
                </div>
              </div>
              
              <!-- 鍒嗛殧绾?-->
              <div style="height: 1px; background: var(--border-color); margin: 20px 0;"></div>
              
              <!-- 寰呬娇鐢ㄧ画璐圭爜鍒楄〃 -->
              <div class="renewal-codes-section">
                <h4 style="margin-bottom: 12px; color: var(--text-secondary); font-size: 14px;">馃師锔?寰呬娇鐢ㄧ殑缁垂鐮?/h4>
                <div id="codes-list" class="codes-grid">
                  <div class="empty-state">馃挙 暂无寰呬娇鐢ㄧ殑缁垂鐮?/div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- 娑堟伅缁熻 -->
        <section id="tab-stats" class="tab-content">
          <h2 class="page-title">馃搱 娑堟伅缁熻鍒嗘瀽</h2>
          
          <!-- 缁熻姒傝 -->
          <div class="stats-overview">
            <div class="stat-box" role="status">
              <div class="stat-box-label">馃摠 浠婃棩鎬绘秷鎭?/div>
              <div id="stats-today-total" class="stat-box-value">-</div>
            </div>
            <div class="stat-box" role="status">
              <div class="stat-box-label">馃懃 缇よ亰娑堟伅</div>
              <div id="stats-group-total" class="stat-box-value">-</div>
            </div>
            <div class="stat-box" role="status">
              <div class="stat-box-label">馃挰 绉佽亰娑堟伅</div>
              <div id="stats-private-total" class="stat-box-value">-</div>
            </div>
          </div>
          
          <!-- 璇︾粏鏁版嵁闈㈡澘 -->
          <div class="panel" style="margin-top:20px;">
            <h3 class="panel-title">馃搳 浠婃棩鏄庣粏鏁版嵁</h3>
            <div class="table-container">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>馃 Bot</th>
                    <th>馃摛 鎬诲彂閫?/th>
                    <th>馃懃 缇よ亰鎬绘暟</th>
                    <th>馃幆 缇よ亰鐩爣(娆℃暟)</th>
                    <th>馃挰 绉佽亰鎬绘暟</th>
                    <th>馃幆 绉佽亰鐩爣(娆℃暟)</th>
                  </tr>
                </thead>
                <tbody id="stats-detail-body">
                  <tr><td colspan="6" class="text-center">馃摥 暂无鏁版嵁</td></tr>
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- 权限管理 -->
        <section id="tab-permissions" class="tab-content">
          <h2 class="page-title">馃攼 权限管理涓績</h2>
          <div class="panel">
            <div class="panel-header">
              <h3 class="panel-title">馃洝锔?鏉冮檺閰嶇疆</h3>
              <div class="toolbar-right">
                <button id="open-permissions-json-btn" class="btn btn-secondary">馃摑 缂栬緫JSON</button>
                <button id="save-permissions-btn" class="btn btn-primary">馃捑 淇濆瓨閰嶇疆</button>
              </div>
            </div>
            <div id="permissions-list" class="perm-accordion"></div>
          </div>
        </section>

        <!-- 配置管理 -->
        <section id="tab-config" class="tab-content">
          <h2 class="page-title">鈿欙笍 配置管理涓績</h2>
          <div class="panel">
            <div class="panel-header">
              <h3 class="panel-title">馃敡 鎻掍欢閰嶇疆</h3>
              <button id="save-config-btn" class="btn btn-primary">馃捑 淇濆瓨閰嶇疆</button>
            </div>
            <div class="config-editor">
              <textarea id="config-json" class="json-editor" rows="25" placeholder="鍦ㄦ澶勭紪杈慗SON閰嶇疆..." aria-label="閰嶇疆缂栬緫鍣?></textarea>
            </div>
          </div>
        </section>
      </main>
    </div>
  </div>

  <!-- 鐧诲綍椤甸潰 -->
  <div id="login-page" style="display:none;">
    <div class="login-container">
      <div class="login-card">
        <h1 class="login-title">
          <span class="login-icon">馃尭</span>
          <span>Membership 管理控制台/span>
        </h1>
        <p class="login-subtitle">鉁?璇疯緭鍏ラ獙璇佺爜鐧诲綍绯荤粺</p>
        <div class="login-form">
          <input 
            type="text" 
            id="login-token" 
            placeholder="璇疯緭鍏?浣嶉獙璇佺爜" 
            class="login-input" 
            maxlength="6"
            autocomplete="off"
            aria-label="楠岃瘉鐮佽緭鍏ユ"
          >
          <button id="login-btn" class="login-btn">馃殌 绔嬪嵆鐧诲綍</button>
        </div>
      </div>
    </div>
  </div>

  <!-- 鏉冮檺JSON缂栬緫寮圭獥 -->
  <div id="perm-json-modal" class="modal hidden" role="dialog" aria-labelledby="modal-title" aria-modal="true">
    <div class="modal-dialog">
      <div class="modal-header">
        <h3 id="modal-title" class="panel-title">馃摑 缂栬緫鏉冮檺JSON</h3>
        <button id="perm-json-close" class="modal-close" title="鍏抽棴" aria-label="鍏抽棴寮圭獥">鉁?/button>
      </div>
      <div class="modal-body">
        <textarea 
          id="permissions-json" 
          class="json-editor" 
          rows="20"
          placeholder="鍦ㄦ澶勭紪杈戞潈闄怞SON閰嶇疆..."
          aria-label="鏉冮檺JSON缂栬緫鍣?
        ></textarea>
      </div>
      <div class="modal-footer">
        <button id="perm-json-cancel" class="btn btn-secondary">鉂?鍙栨秷</button>
        <button id="perm-json-save" class="btn btn-primary">馃捑 淇濆瓨JSON</button>
      </div>
    </div>
  </div>

  <!-- JavaScript -->
  <script src="/membership/static/console.js"></script>
</body>
</html>






